package exercice2.etape2;

import java.util.LinkedList;
import java.util.List;

import exercice2.etape1.Client;
import exercice2.etape1.Order;

public aspect AClientOrder {
	private List<Order> Client.orders;
	
	public void Client.addOrder(Order o){
		//o.setClient(this);
		orders.add(o);
	}
	
	pointcut addOrderPC(Order order):
		call( public void Client.addOrder(Order)) && args(order);
	
	after(Order order): addOrderPC(order) {
		Client client = (Client) thisJoinPoint.getThis();
		order.setClient(client);
		//ajouter le client a order
	}
	
	
	after() : initialization(Client.new(..)) {
		Client client = (Client) thisJoinPoint.getTarget();
		client.orders = new LinkedList<Order>();
	}
	
	
}
